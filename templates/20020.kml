<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">
    <Document>
        <name>20020 Bowl Game Map</name>
        <description><![CDATA[
            <p>This is an unofficial map of the Bowl Game from <i>20020</i>, generated by the <a href="https://github.com/iliana/20020-map">20020 Bowl Game map project</a>. It almost certainly has errors, and we'd love your help fixing them.</p>
            <p>
                <a href="https://www.sbnation.com/secret-base/21410129/20020"><b><i>20020</i></b></a><br>
                Secret Base<br>
                Â© 2020 Vox Media, Inc. All Rights Reserved<br>
                Author, Illustrator, Video Director: Jon Bois<br>
                Editor: Graham MacAree<br>
                Engineer: Frank Bi<br>
                Data: Google, Landsat/Copernicus, LDEO-Columbia, NSF, NOAA, SIO, U.S. Navy, NGA, GEBCO
            </p>
            <p>Revision <a href="https://github.com/iliana/20020-map/tree/{{ revision }}">{{ revision }}</a></p>
        ]]></description>
        <LookAt>
            <longitude>-100.1880648779034</longitude>
            <latitude>38.62136210408951</latitude>
            <altitude>0</altitude>
            <heading>0</heading>
            <tilt>0</tilt>
            <range>3900000</range>
            <gx:altitudeMode>relativeToSeaFloor</gx:altitudeMode>
        </LookAt>
        {% if kmz %}
        <Folder>
            <name>Labels</name>
            {% for field in fields %}
            <GroundOverlay>
                <name>{{ field.team.name }}</name>
                <Icon>
                    <href>files/{{ field.team.name }}.png</href>
                </Icon>
                <altitude>3500</altitude>
                <altitudeMode>absolute</altitudeMode>
                <LatLonBox>
                    <north>{{ field.label.north }}</north>
                    <south>{{ field.label.south }}</south>
                    <east>{{ field.label.east }}</east>
                    <west>{{ field.label.west }}</west>
                    <rotation>{{ 180.0 - field.label_bearing }}</rotation>
                </LatLonBox>
                <Region>
                    <LatLonAltBox>
                        <north>{{ field.label_region.north }}</north>
                        <south>{{ field.label_region.south }}</south>
                        <east>{{ field.label_region.east }}</east>
                        <west>{{ field.label_region.west }}</west>
                    </LatLonAltBox>
                    <Lod>
                        <minLodPixels>0</minLodPixels>
                        <maxLodPixels>800</maxLodPixels>
                        <minFadeExtent>0</minFadeExtent>
                        <maxFadeExtent>400</maxFadeExtent>
                    </Lod>
                </Region>
            </GroundOverlay>
            {% endfor %}
        </Folder>
        {% endif %}
        <Folder>
            <name>Lines</name>
            {% for field in fields %}
            <Placemark>
                <name>{{ field.team.name }}</name>
                <LineString>
                    <altitudeMode>clampToGround</altitudeMode>
                    <tessellate>1</tessellate>
                    <coordinates>
                        {% for point in field.line %}
                        {{ point.x }},{{ point.y }}
                        {% endfor %}
                    </coordinates>
                </LineString>
                <Style>
                    <LineStyle>
                        <color>{{ field.team.color|kml_color }}</color>
                        <width>3</width>
                    </LineStyle>
                </Style>
            </Placemark>
            {% endfor %}
        </Folder>
        {% if kmz %}
        <Folder>
            <name>Fields</name>
            {% for field in fields %}
            <GroundOverlay>
                <name>{{ field.team.name }}</name>
                <Icon>
                    <href>files/{{ field.team.color|css_color }}.png</href>
                </Icon>
                <LatLonBox>
                    <north>{{ field.field.north }}</north>
                    <south>{{ field.field.south }}</south>
                    <east>{{ field.field.east }}</east>
                    <west>{{ field.field.west }}</west>
                    <rotation>{{ 180.0 - field.field_bearing }}</rotation>
                </LatLonBox>
            </GroundOverlay>
            {% endfor %}
        </Folder>
        {% endif %}
    </Document>
</kml>
